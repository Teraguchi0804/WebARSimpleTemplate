var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(t,e){function i(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var l=s.parameters[e];void 0!==l&&(s.parameters[e]=i)}}}var s=this;THREEx.ArBaseControls.call(this,t),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,e=e||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},i(e)},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(t){function e(){s.position.copy(t.position),s.quaternion.copy(t.quaternion),s.scale.copy(t.scale)}function i(){s.position.lerp(t.position,l.lerpPosition),s.quaternion.slerp(t.quaternion,l.lerpQuaternion),s.scale.lerp(t.scale,l.lerpScale)}var s=this.object3d,l=this.parameters,r=s.visible,a=performance.now()/1e3;if(t.visible===!1&&(this._visibleStartedAt=null),t.visible===!0&&(this._unvisibleStartedAt=null),t.visible===!0&&null===this._visibleStartedAt&&(this._visibleStartedAt=a),t.visible===!1&&null===this._unvisibleStartedAt&&(this._unvisibleStartedAt=a),r===!1&&t.visible===!0){var o=a-this._visibleStartedAt;o>=this.parameters.minVisibleDelay&&(s.visible=!0,e())}if(r===!0&&t.visible===!1){var n=a-this._unvisibleStartedAt;n>=this.parameters.minUnvisibleDelay&&(s.visible=!1)}if(null===this._lastLerpStepAt)i(),this._lastLerpStepAt=a;else for(var p=Math.floor((a-this._lastLerpStepAt)/this.parameters.lerpStepDelay),v=0;v<p;v++)i(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;this.object3d.updateMatrix(),r===!1&&s.visible===!0&&this.dispatchEvent({type:"becameVisible"}),r===!0&&s.visible===!1&&this.dispatchEvent({type:"becameUnVisible"})};